<section class="private-main-container">
  <header>
    <app-breadcrumb
      breadcrumbTitle="breadcrumbs.reports"
      route="{{ appRoutes.CONTROL_PANEL }}"
    />
  </header>
  <div class="reports-table">
    <div class="card-table">
      <div class="report-filter">
        <form [formGroup]="recoveryForm">
          <div class="filter-row">
            <app-form-select-field
              borderStyle="secondary"
              width="150px"
              label="{{ 'common.type' | translate }}"
              placeholder="{{ 'common.type' | translate }}"
              control="type"
              [options]="testReportTypes"
              valueField="key"
              textField="text"
              (selectionChangeEmitter)="onReportTypeChange($event)"
            />

            <app-checkbox-tree
              [tree]="typeSelection === 'TESTS' ? treeTests : treeMaintenance"
              (onSelectionChange)="changeTestsSelection($event)"
            />

            <app-checkbox-tree
              *ngIf="typeSelection === 'TESTS'"
              [tree]="treeProducts"
            />
          </div>

          <div class="filter-row">
            <app-date-picker
              [hideHint]="true"
              (onSelectionChange)="onDateChange($event)"
            />

            <app-form-field
              fieldType="input"
              borderStyle="secondary"
              width="130px"
              [hideHint]="true"
              mask="Hh:m0"
              label="{{ 'common.startTime' | translate }}"
              placeholder="{{ 'common.hour' | translate }}"
              (valueChange)="setStartTime($event)"
            />

            <app-form-field
              fieldType="input"
              borderStyle="secondary"
              width="130px"
              [hideHint]="true"
              mask="Hh:m0"
              label="{{ 'common.endTime' | translate }}"
              placeholder="{{ 'common.hour' | translate }}"
              (valueChange)="setEndTime($event)"
            />
          </div>
        </form>

        <app-button
          width="12rem"
          btnStyle="raised"
          variant="secondary"
          (click)="generateReport()"
        >
          {{ "reports.generate-report" | translate }}
        </app-button>
      </div>
    </div>

    <div class="report-content-wrapper">
      <div class="report-content" *ngIf="showReport">
        <div class="report-header">
          <p>RelatÃ³rio</p>
          <p>
            de {{ startDate | date : "dd/MM/yyyy" }} Ã 
            {{ endDate | date : "dd/MM/yyyy" }}
          </p>
        </div>

        <div class="graph-row-1">
          <app-graph-models-tested
            [data]="mostTestedModelsData"
            title="{{ 'dashboard.most-tested-models' | translate }}"
            description="{{
              'dashboard.most-tested-models-description' | translate
            }}"
          />

          <app-graphic-specific-errors
            [data]="ledPingErrorsData"
            title="{{ 'dashboard.led-ping-errors' | translate }}"
            description="{{
              'dashboard.led-ping-errors-description' | translate
            }}"
          />
        </div>
      </div>
    </div>
  </div>
</section>
